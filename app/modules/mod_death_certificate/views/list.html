{% extends 'frontpage.html' %}
{% block title %}Pengajuan Akta Kematian{% endblock %}

{% block head %}
    {{ super() }}
    
    <style>
        .content {
            padding: 20px 0;
        }
        
        .stepwizard-step p {
            margin-top: 10px;
        }

        .stepwizard-row {
            display: table-row;
        }

        .stepwizard {
            display: table;
            width: 100%;
            position: relative;
        }

        .stepwizard-step button[disabled] {
            opacity: 1 !important;
            filter: alpha(opacity=100) !important;
        }

        .stepwizard-row:before {
            top: 14px;
            bottom: 0;
            position: absolute;
            content: " ";
            width: 100%;
            height: 1px;
            background-color: #ccc;
            z-order: 0;

        }

        .stepwizard-step {
            display: table-cell;
            text-align: center;
            position: relative;
        }
        
        .stepwizard-step .btn {
            opacity: 1 !important;
        }

        .btn-circle {
          width: 30px;
          height: 30px;
          text-align: center;
          padding: 6px 0;
          font-size: 12px;
          line-height: 1.428571429;
          border-radius: 15px;
        }
    </style>
    
    <script>
        $(document).ready(function () {
            var navListItems = $('div.step-header div a'),
                    allWells = $('.step-content'),
                    allNextBtn = $('.btn-next');

            allWells.hide();

            navListItems.click(function (e) {
                e.preventDefault();
                var $target = $($(this).attr('href')),
                        $item = $(this);

                if (!$item.hasClass('disabled')) {
                    navListItems.removeClass('btn-primary').addClass('btn-default');
                    $item.addClass('btn-primary');
                    allWells.hide();
                    $target.show();
                    $target.find('input:eq(0)').focus();
                }
            });

            allNextBtn.click(function(){
                var curStep = $(this).closest(".step-content"),
                    curStepBtn = curStep.attr("id"),
                    nextStepWizard = $('div.step-header div a[href="#' + curStepBtn + '"]').parent().next().children("a");
                    
                nextStepWizard.removeAttr('disabled').trigger('click');
            });
            
            $(".tipe-aktamati").hide()
            $('input[name=tipe-aktamati]').on('change', function() {
                var tipe = $(this).val();
                
                $(".tipe-aktamati").hide()
                $("#tipe-aktamati-" + tipe).show()
            });
            
            var i = 1
            $("#add_row").click(function(){
                $('#tabel_anggota tbody').append("<tr><td>"+ (i+1) +"</td><td><input name='nik_anggota[]' type='text' placeholder='NIK' class='form-control input-md'  /> </td><td><input  name='nama_anggota[]' type='text' placeholder='Nama Anggota'  class='form-control input-md'></td><td><input  name='sdhk_anggota[]' type='text' placeholder='SDHK Anggota'  class='form-control input-md'></td></tr>");
            });

            $('div.step-header div a.btn-primary').trigger('click');
            
            /**
            * ===========================================================================================
            */
            $('#lihat-status-permohonan').on('click', function(e) {
                no = $('input[name=noPermohonan]').val()
                $.get('/death_certificate/list/statuspermohonanaktakematian/?noPermohonan='+no, function(data) {
                    if(data.status==0){
                        $('#alert-status-permohonan').html('Permohonan diterima, silakan tunggu notifikasi selanjutnya.')
                    }
                })
                
                e.preventDefault()
            })
        });
    </script>
{% endblock %}

{% block content %}
<div class="container content">
    <div class="stepwizard">
        <div class="stepwizard-row step-header">
            <div class="stepwizard-step">
                <a href="#step-1" type="button" class="btn btn-primary btn-circle">1</a>
                <p>Perhatian</p>
            </div>
            <div class="stepwizard-step">
                <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a>
                <p>Jenis Permohonan</p>
            </div>
            <div class="stepwizard-step">
                <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled">3</a>
                <p>Keterangan</p>
            </div>
        </div>
    </div>
    <form role="form" method="GET" action="{{ url_for('death_certificate.list_statuspermohonanaktamatibyid', id=noPermohonan)}}">
        <div class="row step-content" id="step-1">
            <div class="col-xs-12">
                <div class="col-md-12">
                    <h3>Harap baca baik-baik !!!</h3>
                    <p>
                    Informasi yang anda masukkan pada form ini akan di cek dengan dokumen asli yang akan anda serahkan pada saat pengambilan akta.
					Jika diketahui ada pemalsuan dokumen, saya bersedia di proses secara hukum.
                    </p>
                    
                    <button class="btn btn-primary btn-next pull-right" type="button" >Saya Setuju</button>
                </div>
            </div>
        </div>
        <div class="row step-content" id="step-2">
            <div class="col-xs-12">
                <div class="col-md-12">
                    <h3> Jenis</h3>
                    <p>Jenis Permohonan akta kematian yang ingin Anda buat?</p>
                    
                    <div class="col-lg-6">
                        <div class="input-group">
                            <span class="input-group-addon">
                                <input type="radio" />
                            </span>
                            <span class="form-control">Lihat status permohonan</span>
                        </div>
                    </div>
					<!--
                    <div class="col-lg-6">
                        <div class="input-group">
                            <span class="input-group-addon">
                                <input type="radio" name="tipe-aktamati" value="lama" />
                            </span>
                            <span class="form-control">Lihat status permohonan</span>
                        </div>
                    </div>
                  -->
                    
                    
                    
                </div>
                                        
                    <button class="btn btn-primary btn-next pull-right" type="button" >Lanjutkan</button>
                </div>
            </div>
        </div>
        <div class="row step-content" id="step-3">
            <div class="col-xs-12">
                <div class="col-md-12">
					<p>No Permohonan :</p>
					<div class="input-group">
						<span class="input-group-addon" id="basic-addon1"><i class="glyphicon glyphicon-ok"></i></span>
						<input type="text" name="noPermohonan" class="form-control" placeholder="No Permohonan" aria-describedby="basic-addon1" />
					</div>               
					<button class="btn btn-success pull-right" id="lihat-status-permohonan">Lihat</button>
                    <p>Status :</p>
                    <span id="alert-status-permohonan">Silakan masukkan Id Permohonan</span>
				</div>
			</div>
        </div>
        
    </form>
</div>
{% endblock %}